"use strict";(self.webpackChunkreact_gravity=self.webpackChunkreact_gravity||[]).push([[707],{"./src/components/StarPalette/StarPalette.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Hovered:()=>Hovered,__namedExportsOrder:()=>__namedExportsOrder,default:()=>StarPalette_stories});var react=__webpack_require__("./node_modules/react/index.js"),proxy=__webpack_require__("./node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),AnimatePresence=__webpack_require__("./node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs");const STAR_TEMPLATES=[{label:"Brown Dwarf",mass:5e3,size:30}];var StarRenderer=__webpack_require__("./src/components/StarRenderer/StarRenderer.tsx");const MassSlider=({value,onChange,length,orientation="horizontal",onDragStart,onDragEnd})=>{const sliderRef=react.useRef(null),innerLength=length-40,initialPercentage=(mass=>{const normalizedMass=(mass-1)/2499999;return Math.pow(normalizedMass,1/4)})(value),isVertical="vertical"===orientation,initialPosition=initialPercentage*innerLength-innerLength/2;return react.createElement("div",{style:{width:isVertical?"20px":`${length}px`,height:isVertical?`${length}px`:"20px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"20px",position:"relative",display:"flex",margin:"5px",flexDirection:"column",alignItems:"center",justifyContent:"center"}},react.createElement("div",{style:{flex:1,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}},react.createElement("div",{ref:sliderRef,style:{width:isVertical?"2px":`${innerLength}px`,height:isVertical?`${innerLength}px`:"2px",background:"rgba(255, 255, 255, 0.3)",borderRadius:"1px"}}),react.createElement(proxy.P.div,{drag:isVertical?"y":"x",dragConstraints:sliderRef,dragElastic:0,dragMomentum:!1,onDragStart:()=>onDragStart?.(),onDragEnd:()=>onDragEnd?.(),initial:isVertical?{y:initialPosition}:{x:initialPosition},onDrag:(_,info)=>{if(sliderRef.current){const sliderRect=sliderRef.current.getBoundingClientRect(),relativePos=isVertical?info.point.y-sliderRect.top:info.point.x-sliderRect.left,percentage=Math.max(0,Math.min(innerLength,relativePos))/innerLength,mass=(percentage=>1+2499999*Math.pow(percentage,4))(isVertical?1-percentage:percentage);onChange(mass)}},style:{position:"absolute",cursor:"grab",touchAction:"none",display:"flex",alignItems:"center",justifyContent:"center"}},react.createElement(StarRenderer._,{mass:value}))))};MassSlider.__docgenInfo={description:"",methods:[],displayName:"MassSlider",props:{value:{required:!0,tsType:{name:"number"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:""},length:{required:!0,tsType:{name:"number"},description:""},orientation:{required:!1,tsType:{name:"union",raw:'"vertical" | "horizontal"',elements:[{name:"literal",value:'"vertical"'},{name:"literal",value:'"horizontal"'}]},description:"",defaultValue:{value:'"horizontal"',computed:!1}},onDragStart:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onDragEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var bs=__webpack_require__("./node_modules/react-icons/bs/index.mjs");const StarPalette=({onStarDragStart,onStarDragEnd,containerRef,forceHover=!1})=>{const[starMasses,setStarMasses]=(0,react.useState)({}),[isDragging,setIsDragging]=(0,react.useState)(!1),[isHovered,setIsHovered]=(0,react.useState)(!1),shouldLookHovered=forceHover||isDragging||isHovered;return react.createElement(proxy.P.div,{onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),onTouchStart:e=>e.stopPropagation(),onMouseEnter:()=>setIsHovered(!0),onMouseLeave:()=>setIsHovered(!1),className:"floating-panel star-palette",whileHover:{width:"400px",height:"60px"},transition:{duration:.3,ease:"easeOut"},style:{overflow:shouldLookHovered?"visible":"hidden",width:shouldLookHovered?"400px":"40px",height:shouldLookHovered?"60px":"40px"}},react.createElement("div",null,STAR_TEMPLATES.map(((template,index)=>{return react.createElement("div",{key:index,style:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"20px",position:"relative"}},react.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",transition:"height 0.3s ease-out"}},react.createElement(proxy.P.div,{initial:{opacity:0},animate:{opacity:shouldLookHovered?1:0},transition:{duration:0},drag:!0,dragSnapToOrigin:!0,dragConstraints:containerRef,whileDrag:{scale:1.1,zIndex:1e3},onDragStart:()=>{setIsDragging(!0),onStarDragStart({...template,mass:starMasses[index]||template.mass})},onDragEnd:e=>{setTimeout((()=>{setIsDragging(!1)}),900),onStarDragEnd({...template,mass:starMasses[index]||template.mass},e)},style:{width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"grab",position:"relative",touchAction:"none"}},react.createElement(StarRenderer._,{mass:starMasses[index]||template.mass})),react.createElement(AnimatePresence.N,null,react.createElement(proxy.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"20px"},exit:{opacity:0,height:0},style:{padding:"0px 10px",fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.8)",fontFamily:"-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji'",textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",position:"absolute",top:"35px",left:"0px",display:"flex",gap:"10px"}},react.createElement("span",{style:{minWidth:"50px",textAlign:"left",lineHeight:"1.5"}},(mass=starMasses[index]||template.mass)>=1e6?`${(mass/1e6).toFixed(1)}M`:mass>=1e3?`${(mass/1e3).toFixed(1)}K`:mass.toFixed(0)),react.createElement("span",{style:{minWidth:"50px",textAlign:"left",lineHeight:"1.5"}},(mass=>mass<1e3?"Brown Dwarf":mass<2e4?"Red Dwarf":mass<2e5?"Main Sequence":mass<1e6?"Red Giant":"Super Giant")(starMasses[index]))))),react.createElement(AnimatePresence.N,null,react.createElement(proxy.P.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{type:"spring",stiffness:300,damping:30,mass:1},style:{height:"40px",display:"flex",alignItems:"center"}},react.createElement(MassSlider,{value:starMasses[index]||template.mass,length:300,orientation:"horizontal",onChange:value=>((index,mass)=>{setStarMasses((prev=>({...prev,[index]:mass})))})(index,value)}))));var mass}))),react.createElement(proxy.P.div,{initial:{display:"flex"},animate:{display:shouldLookHovered?"none":"flex"},transition:{duration:0},style:{position:"absolute",transform:"translate(calc(50% - 1px), calc(50% - 1px))",zIndex:1e3}},react.createElement(proxy.P.div,{className:"floating-panel floating-button",style:{width:"20px",height:"20px",padding:0,alignItems:"center",justifyContent:"center",pointerEvents:"none",display:"flex"}},react.createElement(bs.yRx,{size:24}))))};StarPalette.__docgenInfo={description:"",methods:[],displayName:"StarPalette",props:{onStarDragStart:{required:!0,tsType:{name:"signature",type:"function",raw:"(template: StarTemplate) => void",signature:{arguments:[{type:{name:"StarTemplate"},name:"template"}],return:{name:"void"}}},description:""},onStarDragEnd:{required:!0,tsType:{name:"signature",type:"function",raw:"(\n  template: StarTemplate,\n  e: MouseEvent | TouchEvent | PointerEvent\n) => void",signature:{arguments:[{type:{name:"StarTemplate"},name:"template"},{type:{name:"union",raw:"MouseEvent | TouchEvent | PointerEvent",elements:[{name:"MouseEvent"},{name:"TouchEvent"},{name:"PointerEvent"}]},name:"e"}],return:{name:"void"}}},description:""},containerRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLElement>",elements:[{name:"HTMLElement"}]},description:""},forceHover:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const StarPalette_stories={title:"Components/StarPalette",component:StarPalette,parameters:{backgrounds:{default:"dark",values:[{name:"dark",value:"#1a1a1a"}]}}},StarPaletteWrapper=args=>{const containerRef=(0,react.useRef)(null);return react.createElement("div",{ref:containerRef,className:"storybook-container",style:{width:"800px",height:"600px",position:"relative"}},react.createElement(StarPalette,{...args,containerRef}))},Default={render:args=>react.createElement(StarPaletteWrapper,args),args:{onStarDragStart:template=>console.log("Drag start:",template),onStarDragEnd:template=>console.log("Drag end:",template)}},Hovered={render:args=>react.createElement(StarPaletteWrapper,args),args:{forceHover:!0,onStarDragStart:template=>console.log("Drag start:",template),onStarDragEnd:template=>console.log("Drag end:",template)}},__namedExportsOrder=["Default","Hovered"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  render: args => <StarPaletteWrapper {...args} />,\n  args: {\n    onStarDragStart: template => console.log("Drag start:", template),\n    onStarDragEnd: template => console.log("Drag end:", template)\n  }\n}',...Default.parameters?.docs?.source}}},Hovered.parameters={...Hovered.parameters,docs:{...Hovered.parameters?.docs,source:{originalSource:'{\n  render: args => <StarPaletteWrapper {...args} />,\n  args: {\n    forceHover: true,\n    onStarDragStart: template => console.log("Drag start:", template),\n    onStarDragEnd: template => console.log("Drag end:", template)\n  }\n}',...Hovered.parameters?.docs?.source}}}},"./src/components/StarRenderer/StarRenderer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>StarRenderer});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const StarRenderer=({mass})=>{const solarMass=mass/5e4;const color=(mass=>{const temp=Math.min(3e3*Math.pow(mass,.5)+2e3,4e4);if(mass>=50)return"#000000";if(temp<3500)return`rgb(${Math.min(temp/10,255)}, ${temp/20}, 0)`;if(temp<5e3)return`rgb(255, ${Math.min((temp-3500)/6,255)}, 0)`;if(temp<6e3)return`rgb(255, 255, ${Math.min((temp-5e3)/4,255)})`;{const redGreen=Math.max(255-(temp-6e3)/50,100);return`rgb(${redGreen}, ${redGreen}, 255)`}})(solarMass),glow=(mass=>mass>=50?30:10*Math.pow(mass,.4)+5)(solarMass),accretionStyle=(mass=>mass<50?{}:{border:"1px solid #FF00FF",boxShadow:"\n      0 0 4px #FF00FF,\n      0 0 8px rgba(255, 0, 255, 0.5),\n      0 0 12px rgba(0, 0, 255, 0.3),\n      inset 0 0 4px #FF00FF,\n      inset 0 0 8px rgba(255, 0, 255, 0.5)\n    ",animation:"rotate 3s linear infinite"})(solarMass),size=(mass=>{if(mass>=50)return 15;const x=mass/20,bellCurve=10*Math.exp(-Math.pow(x-1,2));return Math.round(5+bellCurve)})(solarMass);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("style",null,"\n          @keyframes rotate {\n            from { transform: translate(-50%, -50%) rotate(0deg); }\n            to { transform: translate(-50%, -50%) rotate(360deg); }\n          }\n        "),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:size,height:size,backgroundColor:color,borderRadius:"50%",boxShadow:solarMass>=50?`0 0 ${glow}px 5px rgba(0, 0, 0, 0.8)`:`0 0 ${glow}px ${color}`,transition:"all 0.3s ease",...accretionStyle}}))};StarRenderer.__docgenInfo={description:"",methods:[],displayName:"StarRenderer",props:{mass:{required:!0,tsType:{name:"number"},description:""}}}}}]);